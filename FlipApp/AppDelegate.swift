import FirebaseCoreimport UIKitclass FlipAppDelegate: NSObject, UIApplicationDelegate {    func application(        _ application: UIApplication,        didFinishLaunchingWithOptions launchOptions: [UIApplication            .LaunchOptionsKey: Any]? = nil    ) -> Bool {        FirebaseApp.configure()        let locationHandler = LocationHandler.shared        // Only restart location if actually in a session        let appManager = AppManager.shared        if appManager.currentState == .tracking || appManager.currentState == .countdown {            if locationHandler.updatesStarted {                locationHandler.startLocationUpdates()            }            // If a background activity session was previously active, reinstantiate it            if locationHandler.backgroundActivity {                locationHandler.backgroundActivity = true            }        }        return true    }        // Add these lifecycle methods    func applicationDidEnterBackground(_ application: UIApplication) {        // Check if in an active session        let appManager = AppManager.shared        if appManager.currentState != .tracking && appManager.currentState != .countdown {            // Not in an active session, so completely stop location tracking            Task { @MainActor in                LocationHandler.shared.completelyStopLocationUpdates()            }        }    }        func applicationWillTerminate(_ application: UIApplication) {        // Always stop location tracking when app terminates        Task { @MainActor in            LocationHandler.shared.completelyStopLocationUpdates()        }    }}